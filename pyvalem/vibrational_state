import pyparsing as pp
from .state import State, StateParseError
from utils import parse_fraction

integer = pp.Word(pp.nums)
atom_Jstr = (integer+pp.Optional(pp.Suppress('/')+'2')).setResultsName('Jstr'))

class VibrationalState(State):
    def parse_state(self, state_str):

        self.state_str = state_str
        
        try:
            components = atom_term.parseString(state_str)
        except pp.ParseException:
            raise StateParseError('Invalid atomic term symbol syntax: {0}'
                                            .format(state_str))
        
        self.J = parse_fraction(components.Jstr)